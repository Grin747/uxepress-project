const IMAGE_FORMAT_ERROR="Неверный формат изображения",TEXTAREA_LIMIT_ERROR="Превышен лимит символов";let addNewsForm=document.querySelector(".add__news-form"),textarea=document.querySelector(".add__news-textarea"),textareaInfo=document.querySelector(".add__news-textarea_info"),addImageButton=document.querySelector(".upload-image__input"),closeImageButton=document.querySelector(".uploaded-image__close-btn"),submitButton=document.querySelector(".add__news-btn-submit"),errorBlock=document.querySelector(".add__news-error-block"),uploadedImage={container:document.querySelector(".uploaded-image__container"),icon:document.querySelector(".uploaded-image__icon"),name:document.querySelector(".uploaded-image__name")},fileReader=new FileReader,image=new Image,imageInfo={url:null,imageName:null};function showUploadedImage(){uploadedImage.container.classList.toggle("uploaded-image__container--active"),uploadedImage.icon.src=imageInfo.url,uploadedImage.name.innerHTML=imageInfo.imageName}function deleteImage(){addImageButton.value=null,imageInfo.imageName=null,imageInfo.url=null,uploadedImage.icon.src="",uploadedImage.name.innerHTML=""}function deleteError(){errorBlock.innerHTML=""}textarea.onkeyup=()=>{textareaInfo.innerHTML=`Символов: ${textarea.value.length}/150`,textarea.value.length>150?(textareaInfo.innerHTML=`Символов: <span class="limit-symbols">${textarea.value.length}</span>/150`,errorBlock.innerHTML=TEXTAREA_LIMIT_ERROR):deleteError()},addImageButton.addEventListener("change",()=>{let e=addImageButton.files[0];fileReader.readAsDataURL(e),e.name.length>25?imageInfo.imageName=`${imageInfo.imageName.slice(0,20)}...${e.type.match("jpeg|jpg|png")}`:imageInfo.imageName=e.name}),fileReader.addEventListener("load",e=>{let a=e.target.result;image.src=a,imageInfo.url=a}),image.addEventListener("load",()=>{let e=image.width,a=image.height;e<=270&&a<=270?(showUploadedImage(),deleteError()):(errorBlock.innerHTML=IMAGE_FORMAT_ERROR,deleteImage())}),closeImageButton.addEventListener("click",e=>{e.preventDefault(),uploadedImage.container.classList.toggle("uploaded-image__container--active"),deleteImage()}),submitButton.addEventListener("click",e=>{e.preventDefault(),0===errorBlock.innerHTML.length&&addNewsForm.submit()});let loginButton=document.querySelector(".login-btn"),modalWindow=document.querySelector(".modal__window"),closeButton=document.querySelector(".close-btn");loginButton.addEventListener("click",()=>{modalWindow.classList.toggle("modal__window--active")}),closeButton.addEventListener("click",()=>{modalWindow.classList.toggle("modal__window--active")}),window.addEventListener("click",e=>{e.target==modalWindow&&modalWindow.classList.toggle("modal__window--active")});